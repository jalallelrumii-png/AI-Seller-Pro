<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ScriptLaku ELITE - Auto Convert Engine</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; transition: 0.4s; }
        .glass { backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); }
        .ios-card { border-radius: 28px; border: 1px solid rgba(255,255,255,0.1); overflow: hidden; }
        .dark-theme { background: #000; color: #fff; }
        .light-theme { background: #F2F2F7; color: #000; }
        .input-box { background: rgba(120,120,128,0.12); border-radius: 14px; padding: 12px; width: 100%; outline: none; font-size: 14px; border: 1px solid transparent; color: inherit;}
        .input-box:focus { border: 1px solid #FF375F; background: rgba(120,120,128,0.08); }
        .input-box::placeholder { color: rgba(255,255,255,0.4); }
        .dark-theme .input-box { background: rgba(28,28,30,0.8); }
        .light-theme .input-box { background: rgba(255,255,255,0.8); color: black; }
        .btn-magic { background: linear-gradient(135deg, #FF375F 0%, #BF5AF2 100%); transition: 0.3s; }
        .btn-magic:active { transform: scale(0.96); }
        [x-cloak] { display: none !important; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body x-data="bulkApp()" :class="darkMode ? 'dark-theme' : 'light-theme'" x-cloak>

    <nav class="sticky top-0 z-50 glass py-4 px-6 flex justify-between items-center border-b border-white/10" :class="darkMode ? 'bg-black/60' : 'bg-white/60'">
        <div class="flex flex-col">
            <h1 class="text-xl font-extrabold italic tracking-tight">Script<span class="text-pink-500">Laku</span></h1>
            <span class="text-[8px] font-black uppercase tracking-[0.3em] opacity-40">Elite Engine v3.0</span>
        </div>
        <div class="flex gap-2">
            <button @click="darkMode = !darkMode" class="p-2.5 rounded-xl bg-gray-500/10 transition-all active:bg-gray-500/30"> <span x-text="darkMode ? '‚òÄÔ∏è' : 'üåô'"></span></button>
            <button @click="openSet = true" class="p-2.5 rounded-xl bg-gray-500/10 transition-all active:bg-gray-500/30">‚öôÔ∏è</button>
        </div>
    </nav>

    <main class="p-4 max-w-4xl mx-auto space-y-6 pb-24">
        
        <div class="ios-card p-6 shadow-2xl" :class="darkMode ? 'bg-[#1C1C1E]' : 'bg-white'">
            <div class="flex items-center justify-between mb-6">
                <h2 class="font-extrabold text-lg">Bulk Product Input</h2>
                <span class="text-[10px] font-bold py-1 px-3 rounded-full bg-pink-500/10 text-pink-500 uppercase">Max 6 Items</span>
            </div>

            <div class="space-y-6">
                <template x-for="(item, i) in products" :key="i">
                    <div class="p-5 rounded-[22px] border border-white/5 bg-gray-500/5 space-y-4">
                        <div class="flex items-center gap-2 text-pink-500 font-bold text-xs uppercase tracking-widest mb-3">
                            <span class="w-5 h-5 rounded-full bg-pink-500 text-white flex items-center justify-center text-[10px]" x-text="i+1"></span>
                            Detail Produk
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="space-y-1">
                                <span class="text-[10px] font-bold opacity-40 uppercase ml-1">Nama Produk</span>
                                <input type="text" x-model="item.name" placeholder="Contoh: Dress Korea Premium" class="input-box">
                            </div>

                            <div class="space-y-1">
                                <span class="text-[10px] font-bold opacity-40 uppercase ml-1">Tipe Skrip</span>
                                <select x-model="item.type" class="input-box font-semibold appearance-none">
                                    <option>üéØ Opening Live</option>
                                    <option>üõçÔ∏è Presentasi Produk</option>
                                    <option>‚ö° Flash Sale</option>
                                    <option>üéÅ Closing</option>
                                    <option>üí¨ Boost Engagement</option>
                                </select>
                            </div>

                            <div class="space-y-1">
                                <span class="text-[10px] font-bold opacity-40 uppercase ml-1">Kategori Produk</span>
                                <select x-model="item.category" class="input-box font-semibold appearance-none">
                                    <option>üëó Fashion</option>
                                    <option>üì± Elektronik</option>
                                    <option>üíÑ Kecantikan</option>
                                    <option>üçú Makanan & Minuman</option>
                                    <option>üè† Rumah Tangga</option>
                                    <option>‚öΩ Olahraga</option>
                                    <option>üß∏ Mainan & Hobi</option>
                                    <option>üì¶ Lainnya</option>
                                </select>
                            </div>

                            <div class="space-y-1">
                                <span class="text-[10px] font-bold opacity-40 uppercase ml-1">Gaya Bahasa</span>
                                <select x-model="item.style" class="input-box font-semibold appearance-none">
                                    <option value="energik">üî• Energik / Semangat</option>
                                    <option value="friendly">üòä Friendly / Santai</option>
                                    <option value="professional">üëî Professional / Edukasi</option>
                                    <option value="lucu">üòÜ Lucu / Menghibur</option>
                                    <option value="galak">üò§ Gaspol / FOMO Banget</option>
                                </select>
                            </div>

                            <div class="grid grid-cols-2 gap-2 md:col-span-2">
                                <div class="space-y-1">
                                    <span class="text-[10px] font-bold opacity-40 uppercase ml-1">Harga Normal</span>
                                    <input type="text" x-model="item.priceNormal" placeholder="Misal: 150.000" class="input-box">
                                </div>
                                <div class="space-y-1">
                                    <span class="text-[10px] font-bold opacity-40 uppercase ml-1">Harga Live Promo</span>
                                    <input type="text" x-model="item.priceLive" placeholder="Misal: 99.000" class="input-box font-bold text-pink-500">
                                </div>
                            </div>

                            <div class="md:col-span-2 space-y-1">
                                <span class="text-[10px] font-bold opacity-40 uppercase ml-1">Keunggulan / Benefit</span>
                                <textarea x-model="item.benefit" placeholder="Contoh: Bahan adem, anti luntur, beli 1 gratis 1..." class="input-box h-24 resize-none"></textarea>
                            </div>
                        </div>
                    </div>
                </template>
            </div>

            <button @click="generateAll()" :disabled="loading" class="w-full btn-magic mt-10 py-5 rounded-[22px] text-white font-black text-lg shadow-2xl shadow-pink-500/30 flex justify-center items-center gap-3 transition-all active:scale-95">
                <span x-show="!loading">üöÄ GENERATE 6 SCRIPTS NOW</span>
                <template x-if="loading">
                    <div class="flex items-center gap-2">
                        <div class="w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"></div>
                        <span class="text-sm">PROCESSING BULK DATA...</span>
                    </div>
                </template>
            </button>
        </div>

        <div class="space-y-6 pb-10">
            <template x-for="(res, i) in results" :key="i">
                <div class="ios-card p-6 shadow-xl transition-all" :class="darkMode ? 'bg-[#1C1C1E]' : 'bg-white'" x-transition:enter="duration-500">
                    <div class="flex justify-between items-center mb-5">
                        <div class="flex flex-col">
                            <span class="text-[9px] font-black uppercase tracking-widest text-pink-500" x-text="'Result for Item ' + (i+1)"></span>
                            <span class="text-xs font-bold opacity-60" x-text="products[i].name"></span>
                        </div>
                        <button @click="copy(res)" class="px-6 py-2 bg-blue-600 text-white text-[10px] font-black rounded-full shadow-lg shadow-blue-600/20 active:scale-90 transition-all">COPY</button>
                    </div>
                    <div class="text-[15px] leading-relaxed font-medium whitespace-pre-wrap border-t border-white/5 pt-4" x-html="res"></div>
                </div>
            </template>
        </div>
    </main>

    <div x-show="openSet" class="fixed inset-0 z-[100] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md" x-cloak>
        <div class="ios-card w-full max-w-sm p-10 text-center bg-[#1C1C1E] shadow-2xl border border-white/10" @click.away="openSet = false">
            <div class="w-16 h-16 bg-pink-500 rounded-2xl flex items-center justify-center text-2xl mx-auto mb-6 shadow-xl shadow-pink-500/20">üíé</div>
            <h3 class="text-xl font-extrabold text-white mb-2">License Activation</h3>
            <p class="text-[10px] text-gray-500 mb-8 uppercase tracking-widest">Masukkan kode akses server</p>
            <input type="password" x-model="apiKey" placeholder="AI-SECRET-KEY" class="input-box text-center mb-6 text-white border border-white/5">
            <button @click="saveSet()" class="w-full btn-magic py-4 rounded-xl text-white font-bold shadow-lg shadow-pink-500/20">SAVE LICENSE</button>
        </div>
    </div>

    <script>
        function bulkApp() {
            return {
                darkMode: true, loading: false, openSet: false,
                apiKey: localStorage.getItem('_secure_v4') || '', // Updated storage key
                products: Array.from({length: 6}, () => ({ // Changed to 6 products
                    name: '', 
                    type: 'üõçÔ∏è Presentasi Produk', 
                    category: 'üëó Fashion', // Added category
                    style: 'energik',
                    priceNormal: '', // Added normal price
                    priceLive: '', 
                    benefit: '' 
                })),
                results: [],
                saveSet() { 
                    localStorage.setItem('_secure_v4', this.apiKey); 
                    this.openSet = false; 
                },
                async generateAll() {
                    if(!this.apiKey) return this.openSet = true;
                    const valids = this.products.filter(p => p.name.trim() !== '');
                    if(valids.length === 0) return alert('Minimal satu nama produk diisi, Nyet!');
                    
                    this.loading = true;
                    this.results = [];
                    try {
                        const promises = valids.map(p => this.callAI(p));
                        this.results = await Promise.all(promises);
                    } catch (e) { 
                        alert('API Error! Pastikan License Key valid dan koneksi internet stabil.'); 
                    } finally { 
                        this.loading = false; 
                    }
                },
                async callAI(p) {
                    const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                        method: 'POST',
                        headers: { 'Authorization': `Bearer ${this.apiKey}`, 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            model: "llama-3.3-70b-versatile", // Using a powerful model
                            messages: [{ 
                                role: "user", 
                                content: `Buatkan skrip live streaming jualan yang sangat persuasif dan bikin orang langsung beli.
                                Produk: ${p.name}, 
                                Kategori: ${p.category},
                                Tipe Skrip: ${p.type}, 
                                Gaya Bahasa: ${p.style}, 
                                Harga Normal: ${p.priceNormal},
                                Harga Live Promo: ${p.priceLive}, 
                                Keunggulan/Benefit: ${p.benefit}. 
                                Buat skrip yang nendang, singkat (max 150 kata), dan bikin penonton FOMO gila-gilaan!` 
                            }]
                        })
                    });
                    const data = await response.json();
                    return data.choices[0].message.content.replace(/\n/g, '<br>');
                },
                copy(t) { 
                    navigator.clipboard.writeText(t.replace(/<br>/g, '\n')); 
                    alert('Script Copied!'); 
                }
            }
        }
    </script>
</body>
</html>
